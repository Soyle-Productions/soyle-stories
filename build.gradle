plugins {
    id 'org.jetbrains.kotlin.jvm' version '1.3.72'
    id "com.github.breadmoirai.github-release" version "2.2.12"
}

apply from: "soyle-tasks.gradle"
apply from: "dependencies.gradle"

group 'com.soyle.stories'
version project.property("version")

repositories {
    mavenCentral()
}

dependencies {
    implementation libraries.kotlin

    testImplementation libraries.junit
    testRuntimeOnly libraries.junitEngine
}

compileKotlin {
    kotlinOptions.jvmTarget = "14"
}
compileTestKotlin {
    kotlinOptions.jvmTarget = "14"
}

test {
    useJUnitPlatform()
}

static def getDate() {
    def date = new Date()
    def year = date.format('yyyy')
    def cl = Calendar.getInstance()
    cl.setTime(date)
    def week = cl.get(cl.WEEK_OF_YEAR)
    return year.substring(2) + "w" + week + (["a", "b", "c", "d", "e", "f", "g"][cl.get(cl.DAY_OF_WEEK)-1])
}